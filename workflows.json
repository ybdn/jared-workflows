[{"id":"MZgv9AjDQQ0aLi1E","name":"J.A.R.E.D.","active":1,"nodes":"[{\"parameters\":{\"rules\":{\"values\":[{\"conditions\":{\"options\":{\"caseSensitive\":true,\"leftValue\":\"\",\"typeValidation\":\"strict\",\"version\":2},\"conditions\":[{\"id\":\"fb144b18-af6f-4ff8-a941-c84a08fe6053\",\"leftValue\":\"={{ $json.voice.file_unique_id }}\",\"rightValue\":\"\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true}}],\"combinator\":\"and\"},\"renameOutput\":true,\"outputKey\":\"Voix\"},{\"conditions\":{\"options\":{\"caseSensitive\":true,\"leftValue\":\"\",\"typeValidation\":\"strict\",\"version\":2},\"conditions\":[{\"leftValue\":\"={{ $json.text }}\",\"rightValue\":\"[null]\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true}}],\"combinator\":\"and\"},\"renameOutput\":true,\"outputKey\":\"Texte\"}]},\"options\":{}},\"type\":\"n8n-nodes-base.switch\",\"typeVersion\":3.2,\"position\":[1700,0],\"id\":\"29f20016-b2dc-4777-a5b1-64f882f26614\",\"name\":\"Switch\"},{\"parameters\":{\"resource\":\"file\",\"fileId\":\"={{ $('INPUT_Telegram').item.json.message.voice.file_id }}\"},\"type\":\"n8n-nodes-base.telegram\",\"typeVersion\":1.2,\"position\":[2080,-120],\"id\":\"4d051bf4-a82d-429e-ad7b-9ac78f95e5b7\",\"name\":\"Telegram\",\"webhookId\":\"6a8fbd70-ea03-49d2-8d5d-eafc109116f6\",\"credentials\":{\"telegramApi\":{\"id\":\"nQZiIP9oXBgOJZXe\",\"name\":\"Telegram account\"}}},{\"parameters\":{\"resource\":\"audio\",\"operation\":\"transcribe\",\"options\":{}},\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"typeVersion\":1.8,\"position\":[2360,-120],\"id\":\"35a09575-83a4-4846-9785-a8ff519df958\",\"name\":\"OpenAI\",\"credentials\":{\"openAiApi\":{\"id\":\"DUTWksCS3uLmTa9V\",\"name\":\"OpenAi account\"}}},{\"parameters\":{\"model\":{\"__rl\":true,\"value\":\"gpt-4o\",\"mode\":\"list\",\"cachedResultName\":\"gpt-4o\"},\"options\":{}},\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"typeVersion\":1.2,\"position\":[3740,240],\"id\":\"3f020abb-ef16-4187-80f8-933cc6f380b8\",\"name\":\"OpenAI Chat Model\",\"credentials\":{\"openAiApi\":{\"id\":\"DUTWksCS3uLmTa9V\",\"name\":\"OpenAi account\"}}},{\"parameters\":{\"contextWindowLength\":8},\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"typeVersion\":1.3,\"position\":[3920,340],\"id\":\"a4e84de4-7f92-4dd8-9d62-aa47ce319b5f\",\"name\":\"Window Buffer Memory\"},{\"parameters\":{\"updates\":[\"message\"],\"additionalFields\":{}},\"type\":\"n8n-nodes-base.telegramTrigger\",\"typeVersion\":1.1,\"position\":[-220,-60],\"id\":\"39a290d7-b9d1-4d88-af23-b2d8dd0242a3\",\"name\":\"INPUT_Telegram\",\"webhookId\":\"7a92c697-c916-40ee-9fc2-f14b42f87bb6\",\"credentials\":{\"telegramApi\":{\"id\":\"nQZiIP9oXBgOJZXe\",\"name\":\"Telegram account\"}}},{\"parameters\":{\"chatId\":\"1141780707\",\"text\":\"={{ $json.formattedOutput }}\",\"additionalFields\":{\"appendAttribution\":false}},\"type\":\"n8n-nodes-base.telegram\",\"typeVersion\":1.2,\"position\":[5700,20],\"id\":\"7438c32b-cc39-43e1-8b36-af64c0db285e\",\"name\":\"OUTPUT_Telegram\",\"webhookId\":\"d229ac28-904f-4c34-9834-d36c2a78138a\",\"credentials\":{\"telegramApi\":{\"id\":\"nQZiIP9oXBgOJZXe\",\"name\":\"Telegram account\"}}},{\"parameters\":{\"jsCode\":\"// Loop over input items and add a new field called 'myNewField' to the JSON of each one\\nreturn {\\n  formattedOutput: $json.output\\n    .replace(/#/g, '')  // Supprime tous les #\\n    .replace(/-\\\\s/g, '‚Ä¢ ') // Remplace les tirets par des puces\\n};\"},\"type\":\"n8n-nodes-base.code\",\"typeVersion\":2,\"position\":[5080,20],\"id\":\"7f0c4a4b-14a8-488d-897e-b7837b74b15d\",\"name\":\"Code\"},{\"parameters\":{\"promptType\":\"define\",\"text\":\"={{ $json.message.content }}\",\"options\":{\"systemMessage\":\"=Tu es J.A.R.E.D., l‚ÄôIA orchestrateur de mon infrastructure. Tu as une arm√©e d'agents √† ta disposition pour me r√©pondre de la meilleure fa√ßon qu'il soit.\\nTa mission est de diriger efficacement les requ√™tes vers les agents sp√©cialis√©s,\\ntout en optimisant les flux de travail et la consommation de tokens.\\n‚ñ† R√®gles g√©n√©rales :\\n‚ñ† Tu n‚Äôex√©cutes jamais une t√¢che directement, mais tu d√©l√®gues aux agents d√©di√©s.\\n‚ñ† Tu v√©rifies toujours si une t√¢che a d√©j√† √©t√© effectu√©e avant d‚Äôappeler un agent.\\n‚ñ† Tu minimises les appels API pour √©viter les requ√™tes inutiles.\\n‚ñ† Tu structures les r√©ponses de mani√®re claire et synth√©tique pour Telegram.\\n‚ñ† Mode de fonctionnement :\\n1‚ñ†‚ñ† Analyse la requ√™te utilisateur et d√©termine les agents √† solliciter.\\n2‚ñ†‚ñ† V√©rifie les donn√©es existantes avant d‚Äôenvoyer une requ√™te.\\n3‚ñ†‚ñ† Appelle le workflow correspondant dans n8n en utilisant le \\\"Call n8n Workflows Tool\\\".\\n4‚ñ†‚ñ† Rassemble les r√©ponses des agents et renvoie un message structur√©.\\n‚ñ† Formatage Telegram :\\n- **Gras** : **Texte en gras**\\n- _Italique_ : _Texte en italique_\\n- ||Spoiler|| : ||Texte en spoiler||\\n- ~~Barr√©~~ : ~~Texte barr√©~~\\n- `Chasse fixe` : ```Texte en chasse fixe```\\n- <code>Code</code>\\nLa date d‚Äôaujourd‚Äôhui est : {{ $now }}.\\n\\nExemples :\\nExemple de prompt pour une interaction optimis√©e :\\nJe souhaite organiser mes t√¢ches pour la semaine, r√©cup√©rer les derni√®res notes importantes, et s'assurer qu'aucun rendez-vous ne se chevauche dans mon agenda.\\n\\n1. REFINIO : Reformule la requ√™te pour clarifier et optimiser les objectifs.\\n2. PLANNER : Planifie les t√¢ches de la semaine en priorisant les urgentes.\\n3. NOTIONIS : R√©cup√®re et structure les notes essentielles.\\n4. CHRONOS : V√©rifie l'agenda pour g√©rer les chevauchements d'√©v√©nements.\\n\"}},\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"typeVersion\":1.7,\"position\":[4020,20],\"id\":\"23f531da-718d-43a2-9574-e7c39e12ffc2\",\"name\":\"J.A.R.E.D.\"},{\"parameters\":{\"name\":\"CHRONOS\",\"description\":\"Appelle le workflow CHRONOS pour interagir avec Google Agenda. V√©rifie la disponibilit√© avant de cr√©er un √©v√©nement et applique la couleur appropri√©e.\",\"workflowId\":{\"__rl\":true,\"value\":\"FzEyyPmoCHPjQmjj\",\"mode\":\"list\",\"cachedResultName\":\"Chronos üìÖ\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4780,200],\"id\":\"d2709649-685b-4c5c-b159-62abce622343\",\"name\":\"CHRONOS\"},{\"parameters\":{\"name\":\"ARCHIVUS\",\"description\":\"Appelle le workflow ARCHIVUS pour rechercher et organiser des fichiers. Priorise les fichiers r√©cemment utilis√©s avant d'effectuer une recherche globale.\",\"workflowId\":{\"__rl\":true,\"value\":\"m2k9MVNT4uCijF2U\",\"mode\":\"list\",\"cachedResultName\":\"Archivus üìÇ\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4940,200],\"id\":\"fd56e558-cf2f-46b5-b3da-b3fafa86d9a1\",\"name\":\"ARCHIVUS\"},{\"parameters\":{\"name\":\"NEXUS\",\"description\":\"Appelle le workflow NEXUS pour interagir avec Google Contacts. V√©rifie les contacts existants avant toute modification ou ajout.\",\"workflowId\":{\"__rl\":true,\"value\":\"ZQYix75iAaAER8pm\",\"mode\":\"list\",\"cachedResultName\":\"Nexus üìá\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4780,360],\"id\":\"7952f5dc-f237-47b5-9154-60706cf79277\",\"name\":\"NEXUS\"},{\"parameters\":{\"name\":\"HERMES\",\"description\":\"Appelle le workflow HERM√àS pour r√©cup√©rer et traiter les emails Gmail. Trie les emails en fonction de leur priorit√© avant de les analyser.\",\"workflowId\":{\"__rl\":true,\"value\":\"L8WyFsHgpHUN8Vh2\",\"mode\":\"list\",\"cachedResultName\":\"Herm√®s ‚úâÔ∏è\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4940,360],\"id\":\"ef74c9f5-e8ef-4741-824c-f1bd0f604b55\",\"name\":\"HERMES\"},{\"parameters\":{\"name\":\"TASKMASTER\",\"description\":\"Appelle le workflow TASKMASTER pour g√©rer les t√¢ches Google Tasks. V√©rifie les t√¢ches en cours avant de g√©n√©rer une nouvelle entr√©e.\",\"workflowId\":{\"__rl\":true,\"value\":\"TCeObWPCbifgzUen\",\"mode\":\"list\",\"cachedResultName\":\"TaskMaster ‚úÖ\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4780,520],\"id\":\"26051457-8b43-4e36-82ab-d7c5286d5de7\",\"name\":\"TASKMASTER\"},{\"parameters\":{\"name\":\"NOTIONIS\",\"description\":\"Appelle le workflow NOTIONIS pour organiser et structurer les notes Google Keep. V√©rifie les notes existantes avant toute cr√©ation.\",\"workflowId\":{\"__rl\":true,\"value\":\"hcf2F6ZAEwbYn9VD\",\"mode\":\"list\",\"cachedResultName\":\"Notionis üìù\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4940,520],\"id\":\"4bcaddc9-ec8d-41b9-9ed0-c9b0900cc005\",\"name\":\"NOTIONIS\"},{\"parameters\":{\"name\":\"SENTINEL\",\"description\":\"Appelle le workflow SENTINEL pour analyser un document et extraire les informations importantes.\",\"workflowId\":{\"__rl\":true,\"value\":\"8dshi4CBtKl4Mvg4\",\"mode\":\"list\",\"cachedResultName\":\"Sentinel üßê\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4060,800],\"id\":\"62df0212-c2c5-4555-8aad-f8cb3123eda7\",\"name\":\"SENTINEL\"},{\"parameters\":{\"name\":\"SUMMARION\",\"description\":\"Appelle le workflow SUMMARION pour g√©n√©rer un r√©sum√© optimis√© d‚Äôun document volumineux.\",\"workflowId\":{\"__rl\":true,\"value\":\"FVW4zvvOdP10C4KM\",\"mode\":\"list\",\"cachedResultName\":\"Summarion üìù\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4180,800],\"id\":\"fdc6be70-da2d-46c2-8600-aae83395042d\",\"name\":\"SUMMARION\"},{\"parameters\":{\"name\":\"SCRIPTO\",\"description\":\"Appelle le workflow SCRIPTO pour g√©n√©rer une r√©ponse r√©dig√©e avec pr√©cision et clart√©.\",\"workflowId\":{\"__rl\":true,\"value\":\"q2L5Bdkap3RrdWoN\",\"mode\":\"list\",\"cachedResultName\":\"Scripto ‚úçÔ∏è\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4060,980],\"id\":\"e971172b-145d-4fa8-928b-bb0e358e4efe\",\"name\":\"SCRIPTO\"},{\"parameters\":{\"name\":\"PLANNER\",\"description\":\"Appelle le workflow PLANNER pour organiser et prioriser les t√¢ches et √©v√©nements en fonction de leur importance.\",\"workflowId\":{\"__rl\":true,\"value\":\"oR9MjxEqqVdn9XEs\",\"mode\":\"list\",\"cachedResultName\":\"Planner üìÖ\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4180,980],\"id\":\"e13a221b-2d21-4a37-b3b5-395765ecf4de\",\"name\":\"PLANNER\"},{\"parameters\":{\"name\":\"REFINIO\",\"description\":\"Appelle le workflow REFINIO pour reformuler et optimiser une requ√™te avant ex√©cution afin de limiter la consommation de tokens.\",\"workflowId\":{\"__rl\":true,\"value\":\"649CffQ6A7RRDpvM\",\"mode\":\"list\",\"cachedResultName\":\"Refinio üéØ\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4300,980],\"id\":\"3e423fb0-6a13-4cf2-87c6-82f9105178b7\",\"name\":\"REFINIO\"},{\"parameters\":{\"name\":\"ORACLE\",\"description\":\"Appelle le workflow ORACLE pour r√©cup√©rer et structurer les r√©sultats d‚Äôune recherche web.\",\"workflowId\":{\"__rl\":true,\"value\":\"r8XSrDrTRiyrTUuS\",\"mode\":\"list\",\"cachedResultName\":\"Oracle üåê\"},\"workflowInputs\":{\"mappingMode\":\"defineBelow\",\"value\":{},\"matchingColumns\":[],\"schema\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"typeVersion\":2,\"position\":[4300,800],\"id\":\"180517e2-ebe8-4480-96b0-aa0a84af09ca\",\"name\":\"ORACLE\"},{\"parameters\":{\"httpMethod\":\"POST\",\"path\":\"f01f15e1-32bb-41c5-bc44-080eef9f37fa\",\"responseMode\":\"lastNode\",\"options\":{}},\"type\":\"n8n-nodes-base.webhook\",\"typeVersion\":2,\"position\":[-220,140],\"id\":\"66a5fe4c-536c-4648-81c0-ae51a39499e4\",\"name\":\"Siri\",\"webhookId\":\"f01f15e1-32bb-41c5-bc44-080eef9f37fa\"},{\"parameters\":{\"assignments\":{\"assignments\":[{\"id\":\"28fd1ce7-dd32-4668-b884-4653ccaa9907\",\"name\":\"source\",\"value\":\"iphone\",\"type\":\"string\"},{\"id\":\"df71a9f7-ad23-471c-b5f4-4279526903a0\",\"name\":\"user_id\",\"value\":\"ybdn\",\"type\":\"string\"},{\"id\":\"6e0e8f74-0dda-4bd7-b9fa-34f8798ee34f\",\"name\":\"voice\",\"value\":\"={{ $json.message.voice }}\",\"type\":\"object\"},{\"id\":\"72ab37da-1443-4556-bf22-d4fe93b8954d\",\"name\":\"text\",\"value\":\"={{ $json.message.text }}\",\"type\":\"string\"}]},\"options\":{}},\"type\":\"n8n-nodes-base.set\",\"typeVersion\":3.4,\"position\":[660,0],\"id\":\"9ba8d900-fb95-4207-b8d4-fbc64e7d4100\",\"name\":\"input_Clear\"},{\"parameters\":{\"assignments\":{\"assignments\":[{\"id\":\"7ed55efc-c126-4749-94ef-77da4c1a2ce3\",\"name\":\"sessionId\",\"value\":\"={{ Math.floor(Math.random() * 1000) }}\",\"type\":\"number\"},{\"id\":\"674e79e7-9b09-4326-8308-2d5df0356b1c\",\"name\":\"source\",\"value\":\"={{ $('input_Clear').item.json.source }}\",\"type\":\"string\"},{\"id\":\"22a7e1c1-7b76-4581-addf-f589a469d3de\",\"name\":\"user_id\",\"value\":\"={{ $('input_Clear').item.json.user_id }}\",\"type\":\"string\"},{\"id\":\"b727837e-e46c-4593-9000-c526fc9837a8\",\"name\":\"message.content\",\"value\":\"={{ $json.text }}\",\"type\":\"string\"}]},\"options\":{}},\"type\":\"n8n-nodes-base.set\",\"typeVersion\":3.4,\"position\":[3000,20],\"id\":\"c11af687-6f71-49d7-aee0-6791ee2e2b32\",\"name\":\"Edit Fields\"},{\"parameters\":{\"assignments\":{\"assignments\":[{\"id\":\"19f6e9e7-4421-4757-b452-d183343b226c\",\"name\":\"message.text\",\"value\":\"={{ $json.body.text }}\",\"type\":\"string\"}]},\"options\":{}},\"type\":\"n8n-nodes-base.set\",\"typeVersion\":3.4,\"position\":[0,140],\"id\":\"67c490a2-e459-4edd-a1b0-9f206c4e80b4\",\"name\":\"Edit Fields1\"}]","connections":"{\"Switch\":{\"main\":[[{\"node\":\"Telegram\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Edit Fields\",\"type\":\"main\",\"index\":0}]]},\"Telegram\":{\"main\":[[{\"node\":\"OpenAI\",\"type\":\"main\",\"index\":0}]]},\"OpenAI\":{\"main\":[[{\"node\":\"Edit Fields\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"J.A.R.E.D.\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"J.A.R.E.D.\",\"type\":\"ai_memory\",\"index\":0}]]},\"INPUT_Telegram\":{\"main\":[[{\"node\":\"input_Clear\",\"type\":\"main\",\"index\":0}]]},\"Code\":{\"main\":[[{\"node\":\"OUTPUT_Telegram\",\"type\":\"main\",\"index\":0}]]},\"J.A.R.E.D.\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}]